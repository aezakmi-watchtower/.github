# .github
## Watchnower ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∞—É–¥–∏—Ç–∞ –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
Watchnower ‚Äî —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É—á—ë—Ç–∞ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏–π –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.
**–°–∏—Å—Ç–µ–º–∞ —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á–∏**:
- —Ñ–∏–∫—Å–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏ –¥–æ–º–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π;
- –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É;
- –Ω–∞–¥—ë–∂–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π;
- –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è API –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ audit-–¥–∞–Ω–Ω—ã—Ö.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ event-driven –ø—Ä–∏–Ω—Ü–∏–ø—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Kafka –∏ ClickHouse –∏ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞:
- –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤;
- at-least-once —Å–µ–º–∞–Ω—Ç–∏–∫—É –¥–æ—Å—Ç–∞–≤–∫–∏;
- –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É–¥—É—â–µ–º –±–µ–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. Audit SDK
üì¶ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `audit_sdk`
Python-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –ø–æ–¥–∫–ª—é—á–∞–µ–º–∞—è –≤ –±–∏–∑–Ω–µ—Å-–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã.

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞—É–¥–∏—Ç HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤;
- –∞—É–¥–∏—Ç –¥–æ–º–µ–Ω–Ω—ã—Ö (–±–∏–∑–Ω–µ—Å) —Å–æ–±—ã—Ç–∏–π;
- —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö audit-—Å–æ–æ–±—â–µ–Ω–∏–π;
- –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ Kafka.

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã**:
- –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É;
- graceful degradation (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é);
- –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å fail-fast —Ä–µ–∂–∏–º–∞ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤;
- batch-–æ—Ç–ø—Ä–∞–≤–∫–∞ –∏ retry.
- SDK ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞, –≥–¥–µ —Å–µ—Ä–≤–∏—Å—ã –∑–Ω–∞—é—Ç –ø—Ä–æ Kafka.
2. Kafka
üì¶ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `kafka-fra`

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫**:
- –µ–¥–∏–Ω—ã–π –±—Ä–æ–∫–µ—Ä —Å–æ–±—ã—Ç–∏–π –¥–ª—è –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã –∞—É–¥–∏—Ç–∞;
- –±—É—Ñ–µ—Ä –º–µ–∂–¥—É –ø—Ä–æ–¥—é—Å–µ—Ä–∞–º–∏ –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º;
- –º–µ—Ö–∞–Ω–∏–∑–º –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏.

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
–æ–¥–∏–Ω –∫–ª–∞—Å—Ç–µ—Ä –Ω–∞ –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã;
–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–ø–∏–∫–æ–≤ (HTTP / domain);
—Å–µ–º–∞–Ω—Ç–∏–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏: at-least-once.
3. Audit Service
üì¶ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `audit_service`
–§–æ–Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å-–∫–æ–Ω—Å—å—é–º–µ—Ä Kafka.

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:
- –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ audit-—Å–æ–±—ã—Ç–∏–π;
- –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö;
- batch-–∑–∞–ø–∏—Å—å –≤ ClickHouse;
- –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–µ–º–∞–Ω—Ç–∏–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏.

**–ü—Ä–∏–Ω—Ü–∏–ø—ã**:
- offsets –∫–æ–º–º–∏—Ç—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–ø–∏—Å–∏;
- –≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–¥—É–±–ª–∏–∫–∞—Ç—ã –¥–æ–ø—É—Å—Ç–∏–º—ã);
- –ø—Ä–∏ —Å–±–æ—è—Ö ClickHouse —Å–µ—Ä–≤–∏—Å –ø–∞–¥–∞–µ—Ç –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º;
- –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ—Ç–µ—Ä—å –¥–∞–Ω–Ω—ã—Ö –≤–∞–∂–Ω–µ–µ latency.
4. ClickHouse
üì¶ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `click_house_config`
–û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ audit-—Å–æ–±—ã—Ç–∏–π.

**–ü–æ—á–µ–º—É ClickHouse**:
- –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ append-only workload;
- –≤—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Å—Ç–∞–≤–∫–∏;
- —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã;
- –¥–µ—à—ë–≤–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫**:
- source of truth –¥–ª—è audit-–¥–∞–Ω–Ω—ã—Ö;
- –±–∞–∑–∞ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –ø–æ–¥–¥–µ—Ä–∂–∫–∏, –∞–¥–º–∏–Ω-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.
5. Audit API
üì¶ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `audit_api`
Read-only HTTP API –ø–æ–≤–µ—Ä—Ö ClickHouse.

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:
- –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ audit-–¥–∞–Ω–Ω—ã—Ö —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É;
- —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è;
- –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- cursor-based pagination;
- –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º—É—Ç–∞—Ü–∏–π;
- –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è admin / support / –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

**–ì–∞—Ä–∞–Ω—Ç–∏–∏ –∏ –¥–æ–ø—É—â–µ–Ω–∏—è**
- at-least-once –¥–æ—Å—Ç–∞–≤–∫–∞ audit-—Å–æ–±—ã—Ç–∏–π;
- –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ—Ç–µ—Ä—å —Å–æ–æ–±—â–µ–Ω–∏–π;
- –∏–∑–æ–ª—è—Ü–∏—è audit-—Å–∏—Å—Ç–µ–º—ã –æ—Ç –±–∏–∑–Ω–µ—Å-–∫–æ–¥–∞.
- –≤–æ–∑–º–æ–∂–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã —Å–æ–±—ã—Ç–∏–π;
- –Ω–µ—Ç strict ordering –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏;
- –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ;
